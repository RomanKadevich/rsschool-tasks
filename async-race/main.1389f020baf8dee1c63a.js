(()=>{"use strict";function n(n,t,e=t){const o=document.createElement(n);return o.className=t,o.id=e,o}class t{constructor(){this.container=document.createElement("nav"),this.container.className="navigation"}renderNavButtons(){const t=[];for(let e=0;e<2;e++){const o=n("button",`navigation__btn navigation__btn-${e} button`,`navigation__btn-${e}`);t.push(o),o.textContent=0===e?"TO GARAGE":"TO WINNERS"}this.container.append(t[0]),this.container.append(t[1])}render(){return this.renderNavButtons(),this.container}}const e="http://127.0.0.1:3000",o="/garage",i="/winners";function r(n){return t=this,i=void 0,a=function*(){try{yield fetch(`${e}${o}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}catch(n){throw new Error}},new((r=void 0)||(r=Promise))((function(n,e){function o(n){try{s(a.next(n))}catch(n){e(n)}}function c(n){try{s(a.throw(n))}catch(n){e(n)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(n){n(e)}))).then(o,c)}s((a=a.apply(t,i||[])).next())}));var t,i,r,a}function a(t,e){const o=n("form",`controlPanel__${t} ${t}`),i=n("input",`${t}__input`);i.name="name",i.type="text";const r=n("input",`${t}__input-color`);r.name="color",r.type="color",r.value="#D5F0C7";const a=n("input",`${t}__button button`);return a.value=e,a.type="submit",o.append(i),o.append(r),o.append(a),o}function c(t,e,o,i=t){const r=n("form",t);r.method=o,r.id=i;const a=n("input",`${t}-input button`);return a.name="name",a.type="submit",a.value=e,r.append(a),r}var s=function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function a(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}s((o=o.apply(n,t||[])).next())}))};class d{constructor(){this.container=document.createElement("div"),this.container.className="controlPanel"}renderControlPanels(){const n=a("create","CREATE");this.container.append(n);const t=a("update","UPDATE");this.container.append(t)}renderControlButtons(){const t=n("div","controlPanel__buttons buttons"),e=c("race","RACE","get"),o=c("buttons__reset","RESET","DELETE"),i=c("buttons__generate","GENERATE CARS","get");t.append(e),t.append(o),t.append(i),this.container.append(t)}static createNewCar(){return s(this,void 0,void 0,(function*(){const n=document.querySelector(".controlPanel__create"),t=document.body;n&&n.addEventListener("submit",(e=>s(this,void 0,void 0,(function*(){e.preventDefault();const o=new FormData(n),i={color:"",name:""};o.forEach(((n,t)=>{i[t]=n})),yield r(i);const a=document.querySelector("#create__input");a&&(a.value="");const c=document.querySelector("#create__input-color");c&&(c.value="#D5F0C7"),t.innerHTML="",(new b).run()}))))}))}static updateCar(){let n=0;document.addEventListener("click",(t=>{const e=t.target;e.classList.contains("select-button")&&(n=+e.id.slice(7))}));const t=document.querySelector(".controlPanel__update"),i=document.body;t&&t.addEventListener("submit",(r=>s(this,void 0,void 0,(function*(){r.preventDefault();const a=new FormData(t),c={};a.forEach(((n,t)=>{""!==n&&"#d5f0c7"!==n&&(c[t]=n)})),yield function(n,t){return i=this,r=void 0,c=function*(){try{yield fetch(`${e}${o}/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(n){throw new Error}},new((a=void 0)||(a=Promise))((function(n,t){function e(n){try{s(c.next(n))}catch(n){t(n)}}function o(n){try{s(c.throw(n))}catch(n){t(n)}}function s(t){var i;t.done?n(t.value):(i=t.value,i instanceof a?i:new a((function(n){n(i)}))).then(e,o)}s((c=c.apply(i,r||[])).next())}));var i,r,a,c}(n,c);const s=document.querySelector("#update__input");s&&(s.value="");const d=document.querySelector("#update__input-color");d&&(d.value="#D5F0C7"),i.innerHTML="",(new b).run()}))))}static setRandomCars(){const n=document.querySelector("#buttons__generate"),t=["Tesla","Ford","Chevrolet","Toyota","Honda","Nissan","BMW","Mercedes-Benz","Audi","Lamborghini","Ferrari","Porsche","Subaru","Volkswagen","Mitsubishi","Hyundai","Volvo","Mazda","Kia","Jaguar","Land Rover","Jeep","Lexus","Buick","Chrysler","Dodge","GMC","Lincoln","Cadillac"],e=["Model S","Mustang","Civic","Camry","Leaf","X5","C-Class","A4","Huracan","488 GTB","911","Outback","Golf","Outlander","Santa Fe","S60","MX-5 Miata","Soul","F-PACE","Range Rover","Wrangler","RX 350","Enclave","300","Challenger","Sierra","Navigator","Escalade"],o=["#FF0000","#0000FF","#00FF00","#FFFF00","#000000","#FFFFFF","#C0C0C0","#808080","#FFA500","#800080","#FFC0CB","#A52A2A","#FFD700","#CD7F32","#B87333","#008080","#000080","#800000","#00FF00","#FF00FF","#40E0D0","#708090","#4B0082","#F5F5DC","#808000","#800000","#98FF98","#E6E6FA","#36454F"],i=document.body,a=n=>Math.floor(Math.random()*n),c=()=>s(this,void 0,void 0,(function*(){const n=[];for(let i=0;i<100;i++){const i=t[a(t.length)],c=e[a(e.length)],s={color:`${o[a(o.length)]}`,name:`${i} ${c}`};n.push(r(s))}yield Promise.all(n)}));n&&n.addEventListener("submit",(n=>s(this,void 0,void 0,(function*(){n.preventDefault(),yield c(),i.innerHTML="",(new b).run()}))))}render(){return this.renderControlPanels(),this.renderControlButtons(),this.container}}class u{constructor(){this.container=document.createElement("header"),this.navigation=new t,this.controlPanel=new d}renderOnlyNavigation(){return this.navigation.render()}render(){return this.container.append(this.navigation.render()),this.container.append(this.controlPanel.render()),this.container}}function l(n=[]){return t=this,i=void 0,a=function*(){try{const t=(n=[])=>n.length?`?${n.map((n=>`${n.key}=${n.value}`)).join("&")}`:"",i=yield fetch(`${e}${o}${t(n)}`);return{items:yield i.json(),count:Number(i.headers.get("X-Total-Count"))}}catch(n){throw new Error}},new((r=void 0)||(r=Promise))((function(n,e){function o(n){try{s(a.next(n))}catch(n){e(n)}}function c(n){try{s(a.throw(n))}catch(n){e(n)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(n){n(e)}))).then(o,c)}s((a=a.apply(t,i||[])).next())}));var t,i,r,a}function h(n){return`\n<svg version="1.0" xmlns="http://www.w3.org/2000/svg"\nwidth="1280.000000pt" height="867.000000pt" viewBox="0 0 1280.000000 300.000000"\npreserveAspectRatio="xMidYMid meet">\n<metadata>\nCreated by potrace 1.15, written by Peter Selinger 2001-2017\n</metadata>\n<g transform="translate(0.000000,867.000000) scale(0.100000,-0.100000)"\nfill="${n}" stroke="none">\n<path d="M6201 5679 c-569 -30 -1155 -158 -1689 -370 -426 -170 -836 -397\n-1252 -693 l-115 -82 -121 4 -120 4 -34 62 c-56 101 -184 286 -260 374 -40 46\n-108 112 -151 145 -69 55 -79 66 -79 95 0 41 -35 62 -75 44 -53 -24 -12 -115\n44 -97 37 11 243 -205 361 -380 49 -73 120 -209 120 -230 0 -7 -125 -11 -372\n-12 -322 -2 -816 -18 -825 -27 -2 -1 6 -29 17 -61 11 -32 20 -62 20 -66 0 -5\n-18 -12 -41 -15 -51 -8 -103 -43 -107 -72 -4 -24 40 -56 91 -68 l29 -6 -31\n-19 c-52 -32 -33 -77 44 -103 l36 -13 -25 -17 c-54 -35 -22 -79 76 -105 l63\n-16 33 -108 34 -107 -47 -52 c-96 -107 -130 -198 -100 -262 33 -70 2 -67 612\n-56 301 5 640 12 753 15 113 2 217 5 233 5 22 0 27 4 27 26 0 92 60 182 135\n203 45 12 265 15 265 3 0 -4 -16 -16 -35 -26 -50 -27 -132 -117 -158 -173 -18\n-39 -22 -66 -22 -143 0 -109 15 -148 82 -212 61 -59 124 -83 218 -83 71 0 89\n4 148 33 36 18 88 54 113 80 106 106 140 264 81 384 -15 31 -44 71 -64 89\nl-37 32 59 -6 c33 -4 95 -10 139 -13 l78 -7 29 -45 c34 -53 39 -133 13 -183\n-8 -17 -13 -33 -10 -36 3 -3 851 -1 1883 6 1033 6 2063 11 2288 11 l410 0 0\n108 c0 95 3 113 27 164 34 72 95 131 166 160 52 21 72 23 217 22 140 -1 173\n-4 259 -27 306 -82 489 -263 474 -468 -2 -33 -4 -59 -4 -60 2 -2 581 -56 584\n-54 2 1 -9 70 -23 153 -14 83 -32 215 -40 294 l-15 144 133 278 132 279 93 48\nc185 95 295 217 310 344 l5 45 -459 0 c-892 0 -1880 -58 -2699 -158 l-140 -17\n-140 79 c-77 43 -146 85 -153 91 -12 11 -8 27 22 96 20 45 35 83 33 85 -3 3\n-325 -370 -322 -374 2 -2 48 26 103 62 l101 65 108 -45 c59 -25 119 -50 132\n-55 13 -5 22 -11 20 -13 -2 -2 -116 -21 -254 -41 -931 -136 -1744 -339 -2367\n-591 -87 -35 -161 -64 -163 -64 -2 0 -13 21 -25 47 -66 150 -280 294 -590 396\n-74 25 -150 48 -168 52 -37 8 -37 7 2 105 32 82 88 160 170 238 313 297 927\n493 1816 581 365 36 497 43 991 48 l486 6 257 -349 c142 -192 263 -353 268\n-359 5 -5 2 8 -7 30 -9 22 -67 166 -130 320 -62 154 -121 297 -130 319 l-16\n39 123 -7 c68 -4 152 -9 188 -11 l65 -5 -40 20 c-60 29 -351 124 -505 164\n-535 137 -1102 194 -1659 165z"/>\n<path d="M6214 4866 l-21 -15 38 -202 c21 -112 38 -204 36 -205 -1 -1 -372\n-28 -824 -60 -452 -32 -820 -60 -818 -62 2 -2 39 -16 82 -31 177 -59 314 -168\n376 -299 l34 -70 44 20 c80 36 461 175 634 231 450 147 937 265 1313 318 46 6\n82 13 80 14 -2 2 -116 -5 -253 -15 -138 -10 -277 -20 -310 -21 l-59 -3 -78\n199 c-43 109 -80 201 -84 204 -3 3 -42 7 -87 9 -61 2 -87 -1 -103 -12z"/>\n<path d="M9508 3631 c-74 -24 -116 -51 -166 -105 -63 -68 -94 -139 -100 -222\n-6 -93 15 -158 73 -222 62 -69 127 -96 230 -96 69 -1 89 4 147 31 220 103 294\n370 149 536 -73 83 -216 117 -333 78z"/>\n</g>\n</svg>\n`}var v=function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function a(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}s((o=o.apply(n,t||[])).next())}))};class m{constructor(){this.container=n("div","garage")}renderHeading(){return v(this,void 0,void 0,(function*(){const t=n("h1","garage__heading");t.textContent=`Garage (${yield function(){return n=this,t=void 0,r=function*(){try{const n=yield fetch(`${e}${o}`);return(yield n.json()).length}catch(n){throw new Error}},new((i=void 0)||(i=Promise))((function(e,o){function a(n){try{s(r.next(n))}catch(n){o(n)}}function c(n){try{s(r.throw(n))}catch(n){o(n)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof i?t:new i((function(n){n(t)}))).then(a,c)}s((r=r.apply(n,t||[])).next())}));var n,t,i,r}()})`,this.container.append(t)}))}renderInfo(t){const e=n("h2","garage__info");e.textContent=`Page #${t}`,this.container.append(e)}renderList(t){var e;return v(this,void 0,void 0,(function*(){try{const o=yield l(t),i=n("ul","garage__list");null===(e=o.items)||void 0===e||e.forEach((n=>i.append(this.renderItem(n)))),this.container.append(i)}catch(n){throw new Error}}))}renderItem(t){const e=n("li","item",`item-${t.id}`),o=n("div","item__content"),i=n("button","select-button button",`select-${t.id}`);i.textContent="select";const r=n("button","remove-button button",`remove-${t.id}`);r.textContent="remove";const a=n("button","item__start button",`item__start-${t.id}`);a.textContent="A";const c=n("button","item__end button",`item__end-${t.id}`);c.textContent="B",c.disabled=!0;const s=n("div","item__car-name");s.textContent=t.name||"";const d=n("div","item__car-img",`item__car-img-${t.id}`);d.innerHTML=h(t.color);const u=n("div","item__flag-img",`item__flag-img-${t.id}`);return u.innerHTML='<svg width="31" height="60" viewBox="0 0 31 60" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <rect x="6" y="2" width="2" height="58" fill="#9E4E4E"/>\n      <path d="M30.8278 17.4543L8.09547 32.3266L8.00646 2.71908L30.8278 17.4543Z" fill="#F40707"/>\n      </svg>',o.append(i),o.append(r),o.append(s),o.append(a),o.append(c),o.append(d),e.append(o),e.append(u),e}static removeCar(){const n=document.body;let t=0;document.addEventListener("click",(r=>{var a;const c=r.target;if(c.classList.contains("remove-button")){t=+c.id.slice(7),function(n){var t,i,r,a;t=this,i=void 0,a=function*(){try{yield fetch(`${e}${o}/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})}catch(n){throw new Error}},new((r=void 0)||(r=Promise))((function(n,e){function o(n){try{s(a.next(n))}catch(n){e(n)}}function c(n){try{s(a.throw(n))}catch(n){e(n)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(n){n(e)}))).then(o,c)}s((a=a.apply(t,i||[])).next())}))}(t),function(n){var t,o,r,a;t=this,o=void 0,a=function*(){try{yield fetch(`${e}${i}/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})}catch(n){throw new Error}},new((r=void 0)||(r=Promise))((function(n,e){function i(n){try{s(a.next(n))}catch(n){e(n)}}function c(n){try{s(a.throw(n))}catch(n){e(n)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(n){n(e)}))).then(i,c)}s((a=a.apply(t,o||[])).next())}))}(t);const r=new m;null===(a=n.lastChild)||void 0===a||a.remove(),n.append(r.render())}}))}render(n=1){return this.renderHeading(),this.renderInfo(1),this.renderList([{key:"_page",value:n},{key:"_limit",value:7}]),this.container}}class p{constructor(){this.container=document.createElement("div"),this.container.className="navigation-garage"}renderGarageNavButtons(){const t=[];for(let e=0;e<2;e++){const o=n("button",`navigation-garage__btn navigation-garage__btn-${e} button`,`navigation-garage__btn-${e}`);t.push(o),o.textContent=0===e?"PREV":"NEXT"}this.container.append(t[0]),this.container.append(t[1])}static pagination(){const n=document.querySelector(".navigation-garage__btn-1"),t=document.querySelector(".navigation-garage__btn-0"),e=document.body,o=()=>{return o=this,i=void 0,a=function*(){var o,i;const r=document.querySelector("#garage__info");let a=0;r&&(a=Number(null===(o=r.textContent)||void 0===o?void 0:o.slice(6)));const c=(yield l([{key:"_page",value:a},{key:"_limit",value:7}])).count,s=Math.ceil(c/7);if(a<s){t&&(t.disabled=!1),a+=1;const n=new m;null===(i=e.lastChild)||void 0===i||i.remove(),e.append(n.render(a));const o=document.querySelector("#garage__info");o&&(o.textContent=`Page #${a}`)}a===s&&n&&(n.disabled=!0)},new((r=void 0)||(r=Promise))((function(n,t){function e(n){try{s(a.next(n))}catch(n){t(n)}}function c(n){try{s(a.throw(n))}catch(n){t(n)}}function s(t){var o;t.done?n(t.value):(o=t.value,o instanceof r?o:new r((function(n){n(o)}))).then(e,c)}s((a=a.apply(o,i||[])).next())}));var o,i,r,a};n&&n.addEventListener("click",(()=>o())),t&&t.addEventListener("click",(()=>(()=>{var o,i;const r=document.querySelector("#garage__info");let a=0;if(r&&(a=Number(null===(o=r.textContent)||void 0===o?void 0:o.slice(6))),a>1){n&&(n.disabled=!1),a-=1;const t=new m;null===(i=e.lastChild)||void 0===i||i.remove(),e.append(t.render(a));const o=document.querySelector("#garage__info");o&&(o.textContent=`Page #${a}`)}1===a&&t&&(t.disabled=!0)})()))}render(){return this.renderGarageNavButtons(),this.container}}var f=function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function a(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}s((o=o.apply(n,t||[])).next())}))};class y{constructor(){this.container=n("div","winners")}renderInfo(t){const e=n("h2","Winner__info");e.textContent=`Page #${t}`,this.container.append(e)}renderList(t){var o;return f(this,void 0,void 0,(function*(){try{const r=yield function(n=[]){return t=this,o=void 0,a=function*(){try{const t=(n=[])=>n.length?`?${n.map((n=>`${n.key}=${n.value}`)).join("&")}`:"",o=yield fetch(`${e}${i}${t(n)}`);return{items:yield o.json(),count:Number(o.headers.get("X-Total-Count"))}}catch(n){throw new Error}},new((r=void 0)||(r=Promise))((function(n,e){function i(n){try{s(a.next(n))}catch(n){e(n)}}function c(n){try{s(a.throw(n))}catch(n){e(n)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(n){n(e)}))).then(i,c)}s((a=a.apply(t,o||[])).next())}));var t,o,r,a}(t),a=n("ul","winner__list");null===(o=r.items)||void 0===o||o.forEach((n=>f(this,void 0,void 0,(function*(){a.append(yield this.renderItem(n,n.id))})))),this.container.append(this.renderHederOfTable()),this.container.append(a)}catch(n){throw new Error}}))}renderItem(t,e){return f(this,void 0,void 0,(function*(){const o=n("li","winner",`winner-${t.id}`),i=n("div","winner__content"),r=n("div","winner__number",`number-${t.id}`);r.textContent="1";const a=yield l([{key:"id",value:e}]),c=n("div","winner__car-img");c.innerHTML=h(a.items[0].color);const s=n("div","winner__car-name");s.textContent=a.items[0].name||"";const d=n("div","winner__wins"),u=n("div","winner__besttime");return i.append(r),i.append(c),i.append(s),i.append(d),i.append(u),o.append(i),o}))}renderHederOfTable(){const t=n("div","table"),e=n("div","table__header");return["#","Car","Name","Wins","Best Times (sec)"].forEach((t=>{const o=n("div","table__header-cell");o.textContent=t,e.append(o)})),t.append(e),t}renderHeading(){return f(this,void 0,void 0,(function*(){const t=n("h1","winner__heading");t.textContent=`Winners (${yield function(){return n=this,t=void 0,r=function*(){try{const n=yield fetch(`${e}${i}`);return(yield n.json()).length}catch(n){throw new Error}},new((o=void 0)||(o=Promise))((function(e,i){function a(n){try{s(r.next(n))}catch(n){i(n)}}function c(n){try{s(r.throw(n))}catch(n){i(n)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof o?t:new o((function(n){n(t)}))).then(a,c)}s((r=r.apply(n,t||[])).next())}));var n,t,o,r}()})`,this.container.append(t)}))}render(){return this.container.innerHTML="",this.renderHeading(),this.renderInfo(1),this.renderList([{key:"_page",value:0},{key:"_limit",value:10}]),this.container}}function g(n=[]){return t=this,o=void 0,r=function*(){try{const t=(n=[])=>n.length?`?${n.map((n=>`${n.key}=${n.value}`)).join("&")}`:"",o=yield fetch(`${e}/engine${t(n)}`,{method:"PATCH"});return yield o.json()}catch(n){throw new Error("Ошибка при выполнении запроса к серверу")}},new((i=void 0)||(i=Promise))((function(n,e){function a(n){try{s(r.next(n))}catch(n){e(n)}}function c(n){try{s(r.throw(n))}catch(n){e(n)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(n){n(e)}))).then(a,c)}s((r=r.apply(t,o||[])).next())}));var t,o,i,r}var _=function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function a(n){try{s(o.next(n))}catch(n){r(n)}}function c(n){try{s(o.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}s((o=o.apply(n,t||[])).next())}))};class w{constructor(){this.animationFrameId=null}carAnimation(n,t){const e=document.getElementById(`item__car-img-${t}`),o=document.getElementById(`item__flag-img-${t}`);if(e&&o){const t=o.getBoundingClientRect().left-e.getBoundingClientRect().left;let i;const r=o=>{i||(i=o);const a=(o-i)/n;if(a<1){const n=t*a;e.style.transform=`translateX(${n}px)`,this.animationFrameId=requestAnimationFrame(r)}};this.animationFrameId=requestAnimationFrame(r)}}stopAnimation(){null!==this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}startAnimation(){document.addEventListener("click",(n=>_(this,void 0,void 0,(function*(){try{const t=n.target,e=+t.id.slice(12);if(t.id===`item__start-${e}`){const n=document.querySelector(`#item__end-${e}`);n&&(n.disabled=!1),t.disabled=!0;const o=yield g([{key:"id",value:e},{key:"status",value:"started"}]),i=o.distance/o.velocity;this.carAnimation(i,e),(yield g([{key:"id",value:e},{key:"status",value:"drive"}])).ok||this.stopAnimation()}}catch(n){n instanceof Error&&(console.error(`Car has been stopped suddenly. It's engine was broken down.${n}`),alert("Car has been stopped suddenly. It's engine was broken down."),this.stopAnimation())}}))))}restart(){document.addEventListener("click",(n=>_(this,void 0,void 0,(function*(){try{const t=n.target,e=+t.id.slice(10);if(t.id===`item__end-${e}`){const n=document.getElementById(`item__car-img-${e}`),o=document.querySelector(`#item__start-${e}`);o&&(o.disabled=!1),t.disabled=!0,yield g([{key:"id",value:e},{key:"status",value:"stopped"}]),n&&(this.stopAnimation(),n.style.transform="translateX(0)")}}catch(n){n instanceof Error&&(console.error(`Car has been stopped suddenly. It's engine was broken down.${n}`),alert("Car has not been stopped"))}}))))}}class b{constructor(){this.container=document.body,this.header=new u,this.garage=new m,this.navigationGarage=new p,this.winners=new y,this.raceAction=new w}loadGarage(){const n=document.querySelector("#navigation__btn-0"),t=document.querySelector(".garage"),e=()=>{if(t)for(t.remove();t.firstChild;)t.firstChild.remove();const e=document.querySelectorAll(".winners");e&&e.forEach((n=>n.remove())),t?t.remove():this.container.append(this.garage.render()),this.container.append(this.garage.render());const o=document.querySelector("#navigation-garage__btn-1");o&&(o.disabled=!1);const i=document.querySelector("#navigation-garage__btn-0");i&&(i.disabled=!1),n&&(n.disabled=!0);const r=document.querySelector("#navigation__btn-1");r&&(r.disabled=!1);const a=document.querySelector(".controlPanel");a&&a.classList.remove("disactive")};n&&(n.removeEventListener("click",e),n.addEventListener("click",e),n.disabled=!0)}loadWinners(){const n=document.querySelector("#navigation__btn-1"),t=document.querySelector(".winners"),e=document.querySelectorAll(".winners"),o=()=>{const o=document.querySelectorAll(".garage");if(o&&o.forEach((n=>n.remove())),e&&e.forEach((n=>{n.innerHTML=""})),t)for(;t.firstChild;)t.firstChild.remove();const i=document.querySelector("#navigation__btn-0");i&&(i.disabled=!1),n&&(n.disabled=!0);const r=document.querySelector(".controlPanel");r&&r.classList.add("disactive");const a=document.querySelector("#navigation-garage__btn-1");a&&(a.disabled=!0);const c=document.querySelector("#navigation-garage__btn-0");c&&(c.disabled=!0),this.container.append(this.winners.render())};n&&(n.removeEventListener("click",o),n.addEventListener("click",o))}run(){this.container.append(this.header.render()),this.container.append(this.navigationGarage.render()),this.container.append(this.garage.render()),d.createNewCar(),m.removeCar(),d.updateCar(),d.setRandomCars(),this.loadGarage(),this.loadWinners(),p.pagination(),this.raceAction.startAnimation(),this.raceAction.restart()}}(new b).run()})();