(()=>{"use strict";function e(e,t,n){const i=n.length,o=n[0].length,c=Math.max(0,e-1),s=Math.min(e+1,i-1),a=Math.max(0,t-1),l=Math.min(t+1,o-1);let d=0;for(let i=c;i<=s;i++)for(let o=a;o<=l;o++)i===e&&o===t||n[i][o].withMine&&d++;return d}function t(e,n,i){n<0||n>=e.length||i<0||i>=e[0].length||e[n][i].open||(e[n][i].open=!0,function(e,t,n){return!!(t-1>=0&&e[t-1][n].withMine||t+1<e.length&&e[t+1][n].withMine||n-1>=0&&e[t][n-1].withMine||n+1<e[0].length&&e[t][n+1].withMine)}(e,n,i)||(t(e,n-1,i),t(e,n+1,i),t(e,n,i-1),t(e,n,i+1)))}const n=function(e,t){const n=[];for(let e=0;e<10;e++){n[e]=[];for(let t=0;t<10;t++)n[e][t]={index:`${e}${t}`,open:!1,withFlaf:!1,withMine:!1,neighborWithMine:0}}return n}();function i(){const i=document.querySelector("#window3");let o=0;const c=document.querySelector(".field");let s=0;const a=document.querySelector("#window2");let l=!1;const d=document.querySelector("#window1"),r=document.querySelector("#window0");let m;function u(){s++,a.textContent=`${s}`}const _=s=>{const{target:l}=s;if(l.classList.contains("field__item")){if(l.classList.contains("field__item_withFlag"))return;o++,r.textContent=`${o}`;const s=parseInt(l.getAttribute("data-row"),10),u=parseInt(l.getAttribute("data-col"),10);if(n[s][u].withMine){document.querySelector(`#item-${s}-${u}`).classList.add("field__explosion");for(let e=0;e<10;e++){for(let t=0;t<10;t++)n[e][t].withMine&&n[e][t]!==n[s][u]&&document.querySelector(`#item-${e}-${t}`).classList.add("field__mines");c.classList.add("field--hover-act-disable"),clearInterval(m),i.textContent="Игра окончена. Попробуйте еще раз!",i.classList.add("game__window_lost")}d.classList.add("gameOver"),c.removeEventListener("click",_)}t(n,s,u);let f=0;for(let t=0;t<10;t++)for(let i=0;i<10;i++){const o=e(t,i,n);if(n[t][i].open){const e=document.querySelector(`#item-${t}-${i}`);e.classList.add("field__item_open"),n[t][i].open&&(o>0&&!n[s][u].withMine&&(e.textContent=`${o}`),f++)}}if(90===f){d.classList.add("win"),clearInterval(m);const e=r.textContent,t=a.textContent;i.textContent=`Ура! Вы нашли все мины за ${t} сек. и ${e} ход.!`,i.classList.add("game__window_win")}}},f=i=>{if(!l){let e=10;for(;e>0;){const t=Math.floor(10*Math.random()),i=Math.floor(10*Math.random());n[t][i].withMine||(n[t][i].withMine=!0,e--)}l=!0}const{target:s}=i;if(s.classList.contains("field__item")){if(s.classList.contains("field__item_withFlag"))return;m=setInterval(u,1e3),o++,r.textContent=`${o}`;const i=parseInt(s.getAttribute("data-row"),10),a=parseInt(s.getAttribute("data-col"),10);t(n,i,a);for(let t=0;t<10;t++)for(let o=0;o<10;o++){n[t][o].withMine&&n[t][o]!==n[i][a]&&document.querySelector(`#item-${t}-${o}`).classList.add("field__mines");const c=e(t,o,n);if(n[t][o].open){const e=document.querySelector(`#item-${t}-${o}`);e.classList.add("field__item_open"),c>0&&(e.textContent=`${c}`)}}c.removeEventListener("click",f),c.addEventListener("click",_),d.classList.add("successfullClick")}};c.addEventListener("click",f)}function o(){const e=document.querySelector("main");e&&e.parentNode.removeChild(e);const t=document.createElement("main");t.classList.add("main"),t.innerHTML="<div class = 'container game__container'>\n  <div class = 'game' id = 'game'></div></div>",document.body.appendChild(t),document.querySelector("#game").innerHTML="<div class = game__info-panel>\n  </div><div class = 'game__field></div>";const n=document.querySelector(".game__info-panel");for(let e=0;e<4;e++){const t=document.createElement("div");t.classList="game__window",t.id=`window${e}`,n.appendChild(t)}const i=document.querySelector("#window1"),o=document.querySelector("#window0"),c=document.querySelector("#window2"),s=document.querySelector("#window3");o.textContent="0",c.textContent="0",i.classList.add("start"),s.textContent="На поле расположено 10 мин!",s.classList.add("game__window_start")}function c(e,t){const n=document.querySelector(".game"),i=document.createElement("div");i.classList="game__field field",n.appendChild(i);const o=document.querySelector(".field"),c=[];for(let n=0;n<e;n++){c[n]=[];for(let e=0;e<t;e++){const t=document.createElement("div");t.classList="field__item",t.setAttribute("data-row",n),t.setAttribute("data-col",e),t.setAttribute("id",`item-${n}-${e}`),o.appendChild(t)}}}!function(){const e=document.createElement("header");e.classList.add("header"),e.innerHTML="<div class = 'container'>\n    <ul class = 'nav__list'>\n    </ul><div class = 'nav-mob__burger'></div></div>",document.body.appendChild(e);let t=0;const s=document.querySelector(".nav__list");["new&nbsp;game","easy","medium","hard","light","dark"].forEach((e=>{const n=document.createElement("li");n.classList=`nav__item nav__item-${t}`,n.innerHTML=`<a class = 'nav__link'>${e}</a>`,s.appendChild(n),t++})),t=0;const a=document.createElement("ul");a.classList.add("nav-mob__list"),document.body.appendChild(a);const l=document.querySelector(".nav-mob__burger");l.innerHTML='<svg width="20" height="16" viewBox="0 0 20 16"\n     fill="none" xmlns="http://www.w3.org/2000/svg">\n    <line y1="1" x2="20" y2="1" stroke="#D483FA" stroke-width="2"/>\n    <line y1="8" x2="20" y2="8" stroke="#D483FA" stroke-width="2"/>\n    <line y1="15" x2="20" y2="15" stroke="#D483FA" stroke-width="2"/>\n    </svg>';const d=document.querySelector(".nav-mob__list");["new game","easy","medium","hard","light","dark"].forEach((e=>{const n=document.createElement("li");n.classList=`nav-mob__item nav-mob__item-${t}`,n.innerHTML=`<a class = 'nav-mob__link'>${e}</a>`,d.appendChild(n),t++}));const r=document.querySelector(".nav__item-0"),m=document.querySelector(".nav-mob__item-0");l.addEventListener("click",(()=>{d.classList.toggle("nav-mob--active")})),m.addEventListener("click",(()=>{o(),c(10,10),i();for(let e=0;e<10;e++)for(let t=0;t<10;t++)n[e][t].withMine=!1,n[e][t].open=!1;d.classList.remove("nav-mob--active")})),r.addEventListener("click",(()=>{o(),c(10,10),i()}))}(),o(),c(10,10),i(),function(){const e=document.querySelector(".field");e.addEventListener("contextmenu",(e=>{e.preventDefault()})),e.addEventListener("contextmenu",(function(e){const{target:t}=e;return t.classList.contains("field__item")&&(n.open||n.withMine||t.classList.toggle("field__item_withFlag")),!0}))}()})();