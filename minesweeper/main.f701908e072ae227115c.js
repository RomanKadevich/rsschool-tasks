(()=>{"use strict";function e(e,t,n){const i=n.length,o=n[0].length,a=Math.max(0,e-1),s=Math.min(e+1,i-1),c=Math.max(0,t-1),d=Math.min(t+1,o-1);let l=0;for(let i=a;i<=s;i++)for(let o=c;o<=d;o++)i===e&&o===t||n[i][o].withMine&&l++;return l}function t(e,n,i){n<0||n>=e.length||i<0||i>=e[0].length||e[n][i].open||(e[n][i].open=!0,function(e,t,n){return!!(t-1>=0&&e[t-1][n].withMine||t+1<e.length&&e[t+1][n].withMine||n-1>=0&&e[t][n-1].withMine||n+1<e[0].length&&e[t][n+1].withMine)}(e,n,i)||(t(e,n-1,i),t(e,n+1,i),t(e,n,i-1),t(e,n,i+1)))}const n=function(e,t){const n=[];for(let e=0;e<10;e++){n[e]=[];for(let t=0;t<10;t++)n[e][t]={index:`${e}${t}`,open:!1,withFlaf:!1,withMine:!1,neighborWithMine:0}}return n}();function i(){const i=document.querySelector("#window3");let o=0;const a=document.querySelector(".field");let s=0;const c=document.querySelector("#window2");let d=!1;const l=document.querySelector("#window1"),r=document.querySelector("#window0");let m;const u=new Audio("./assets/click.mp3"),_=new Audio("./assets/exp.mp3");function v(){s++,c.textContent=`${s}`}const f=s=>{const{target:d}=s;if(d.classList.contains("field__item")){if(d.classList.contains("field__item_withFlag"))return;o++,r.textContent=`${o}`;const s=parseInt(d.getAttribute("data-row"),10),v=parseInt(d.getAttribute("data-col"),10);if(n[s][v].withMine){document.querySelector(`#item-${s}-${v}`).classList.add("field__explosion"),_.play();for(let e=0;e<10;e++){for(let t=0;t<10;t++)n[e][t].withMine&&n[e][t]!==n[s][v]&&document.querySelector(`#item-${e}-${t}`).classList.add("field__mines");a.classList.add("field--hover-act-disable"),clearInterval(m),i.textContent="Игра окончена. Попробуйте еще раз!",i.classList.add("game__window_lost")}l.classList.add("gameOver"),a.removeEventListener("click",f)}t(n,s,v);let L=0;for(let t=0;t<10;t++)for(let i=0;i<10;i++){const o=e(t,i,n);if(n[t][i].open){const e=document.querySelector(`#item-${t}-${i}`);e.classList.add("field__item_open"),n[t][i].open&&(o>0&&!n[s][v].withMine&&(e.textContent=`${o}`),L++)}}if(90===L){l.classList.add("win"),clearInterval(m);const e=r.textContent,t=c.textContent;i.textContent=`Ура! Вы нашли все мины за ${t} сек. и ${e} ход.!`,i.classList.add("game__window_win")}u.play()}},L=i=>{if(!d){let e=10;for(;e>0;){const t=Math.floor(10*Math.random()),i=Math.floor(10*Math.random());n[t][i].withMine||(n[t][i].withMine=!0,e--)}d=!0}const{target:s}=i;if(s.classList.contains("field__item")){if(s.classList.contains("field__item_withFlag"))return;m=setInterval(v,1e3),o++,r.textContent=`${o}`;const i=parseInt(s.getAttribute("data-row"),10),c=parseInt(s.getAttribute("data-col"),10);t(n,i,c);for(let t=0;t<10;t++)for(let i=0;i<10;i++){const o=e(t,i,n);if(n[t][i].open){const e=document.querySelector(`#item-${t}-${i}`);e.classList.add("field__item_open"),o>0&&(e.textContent=`${o}`)}}u.play(),a.removeEventListener("click",L),a.addEventListener("click",f),l.classList.add("successfullClick")}};a.addEventListener("click",L)}function o(){const e=document.querySelector("main");e&&e.parentNode.removeChild(e);const t=document.createElement("main");t.classList.add("main"),t.innerHTML="<div class = 'container game__container'>\n  <div class = 'game' id = 'game'></div></div>",document.body.appendChild(t),document.querySelector("#game").innerHTML="<div class = game__info-panel>\n  </div><div class = 'game__field></div>";const n=document.querySelector(".game__info-panel");for(let e=0;e<4;e++){const t=document.createElement("div");t.classList="game__window",t.id=`window${e}`,n.appendChild(t)}const i=document.querySelector("#window1"),o=document.querySelector("#window0"),a=document.querySelector("#window2"),s=document.querySelector("#window3");o.textContent="0",a.textContent="0",i.classList.add("start"),s.textContent="На поле расположено 10 мин!",s.classList.add("game__window_start")}function a(e,t){const n=document.querySelector(".game"),i=document.createElement("div");i.classList="game__field field",n.appendChild(i);const o=document.querySelector(".field"),a=[];for(let n=0;n<e;n++){a[n]=[];for(let e=0;e<t;e++){const t=document.createElement("div");t.classList="field__item",t.setAttribute("data-row",n),t.setAttribute("data-col",e),t.setAttribute("id",`item-${n}-${e}`),o.appendChild(t)}}}!function(){const e=document.createElement("header");e.classList.add("header"),e.innerHTML="<div class = 'container'>\n    <ul class = 'nav__list'>\n    </ul><div class = 'nav-mob__burger'></div></div>",document.body.appendChild(e);let t=0;const s=document.querySelector(".nav__list");["new&nbsp;game","easy","medium","hard","light","dark"].forEach((e=>{const n=document.createElement("li");n.classList=`nav__item nav__item-${t}`,n.innerHTML=`<a class = 'nav__link'>${e}</a>`,s.appendChild(n),t++})),t=0;const c=document.createElement("ul");c.classList.add("nav-mob__list"),document.body.appendChild(c);const d=document.querySelector(".nav-mob__burger");d.innerHTML='<svg width="20" height="16" viewBox="0 0 20 16"\n     fill="none" xmlns="http://www.w3.org/2000/svg">\n    <line y1="1" x2="20" y2="1" stroke="#D483FA" stroke-width="2"/>\n    <line y1="8" x2="20" y2="8" stroke="#D483FA" stroke-width="2"/>\n    <line y1="15" x2="20" y2="15" stroke="#D483FA" stroke-width="2"/>\n    </svg>';const l=document.querySelector(".nav-mob__list");["new game","easy","medium","hard","light","dark"].forEach((e=>{const n=document.createElement("li");n.classList=`nav-mob__item nav-mob__item-${t}`,n.innerHTML=`<a class = 'nav-mob__link'>${e}</a>`,l.appendChild(n),t++}));const r=document.querySelector(".nav__item-0"),m=document.querySelector(".nav-mob__item-0"),u=document.querySelector(".nav__item-4"),_=document.querySelector(".nav-mob__item-4"),v=document.querySelector(".nav__item-5"),f=document.querySelector(".nav-mob__item-5");d.addEventListener("click",(()=>{l.classList.toggle("nav-mob--active")})),v.addEventListener("click",(()=>{const t=document.querySelector(".game__info-panel"),n=document.querySelector(".main");document.body.classList.add("dark_bg"),n.classList.add("dark_bg"),e.classList.add("dark_header"),t.classList.add("dark_info")})),u.addEventListener("click",(()=>{const t=document.querySelector(".game__info-panel"),n=document.querySelector(".main");document.body.classList.remove("dark_bg"),n.classList.remove("dark_bg"),e.classList.remove("dark_header"),t.classList.remove("dark_info")})),f.addEventListener("click",(()=>{const t=document.querySelector(".game__info-panel"),n=document.querySelector(".main");document.body.classList.add("dark_bg"),n.classList.add("dark_bg"),e.classList.add("dark_header"),t.classList.add("dark_info"),l.classList.remove("nav-mob--active")})),_.addEventListener("click",(()=>{const t=document.querySelector(".game__info-panel"),n=document.querySelector(".main");document.body.classList.remove("dark_bg"),n.classList.remove("dark_bg"),e.classList.remove("dark_header"),t.classList.remove("dark_info"),l.classList.remove("nav-mob--active")})),m.addEventListener("click",(()=>{o(),a(10,10),i();for(let e=0;e<10;e++)for(let t=0;t<10;t++)n[e][t].withMine=!1,n[e][t].open=!1;l.classList.remove("nav-mob--active")})),r.addEventListener("click",(()=>{o(),a(10,10),i();for(let e=0;e<10;e++)for(let t=0;t<10;t++)n[e][t].withMine=!1,n[e][t].open=!1}))}(),o(),a(10,10),i(),function(){const e=document.querySelector(".field");e.addEventListener("contextmenu",(e=>{e.preventDefault()})),e.addEventListener("contextmenu",(function(e){const{target:t}=e;return t.classList.contains("field__item")&&(n.open||n.withMine||t.classList.toggle("field__item_withFlag")),!0}))}()})();